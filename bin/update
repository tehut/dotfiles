#!/usr/bin/env bash

### UTILS

# Gets the full path to this dotfiles repo
DOTFILES_DIR=$(cd "${BASH_SOURCE%/*}/.." && pwd)

function symlink_dotfile() {
  local dotfile_name=$1
  local destination=$2

  local dotfile_path="$DOTFILES_DIR/$dotfile_name"

  if [ ! -f $destination ]; then
    echo "Symlinking $dotfile_path -> $destination"
    ln -sf "$dotfile_path" "$destination"
  fi
}

function install_homebrew_if_needed() {
  if test ! $(which brew); then
    echo "+ Installing homebrew..."

    ruby -e "$(curl -fsSL \
      https://raw.githubusercontent.com/Homebrew/install/master/install)"

    brew update
  else
    echo "+ Homebrew already installed... skipping."
  fi
}

function brew_install() {
  local package=$1

  if brew list "$package" > /dev/null 2>&1; then
    echo "+ $package already installed... skipping."
  else
    brew install $@
  fi
}

### DEPENDENCIES

echo

install_homebrew_if_needed

# everyone loves sl
brew_install sl
brew_install git

### DOTFILES

symlink_dotfile bashrc ~/.bashrc
